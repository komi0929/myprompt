/**
 * Domain types â€” Single Source of Truth for all type definitions.
 *
 * â€ `DbPromptRow` is derived from `database.types.ts` (auto-generated by Supabase CLI).
 * â€ `Prompt` is the client-side model used by UI components.
 * â€ All other domain types (Phase, Folder, SortOrder, etc.) live here.
 */
import type { Tables } from "@/lib/database.types";

/* â”€â”€â”€ DB Row types (auto-generated source) â”€â”€â”€ */
export type DbPromptRow = Tables<"prompts"> & {
  /** Joined from profiles via Supabase select */
  profiles?: { display_name: string | null; avatar_url: string | null }[] | null;
};

export type DbFolderRow = Tables<"folders">;

/* â”€â”€â”€ Domain types â”€â”€â”€ */
export type Phase = "All" | "Planning" | "Design" | "Implementation" | "Debug" | "Release" | "Other";

export interface Prompt {
  id: string;
  title: string;
  content: string;
  tags: string[];
  phase: Exclude<Phase, "All">;
  visibility: "Private" | "Public";
  updatedAt: string;
  likeCount: number;
  useCount?: number;
  isPinned?: boolean;
  authorId?: string;
  authorName?: string;
  authorAvatarUrl?: string;
  folderId?: string;
  lastUsedAt?: string;
  notes?: string;
  rating?: "good" | "neutral" | "bad";
}

export interface Folder {
  id: string;
  name: string;
  color: string;
  sortOrder: number;
}

export type SortOrder = "updated" | "created" | "useCount" | "likes" | "title";

export const SORT_OPTIONS: { value: SortOrder; label: string }[] = [
  { value: "updated", label: "æ›´æ–°æ—¥é †" },
  { value: "useCount", label: "ã‚ˆãä½¿ã†é †" },
  { value: "likes", label: "ã„ã„ã­é †" },
  { value: "title", label: "ã‚¿ã‚¤ãƒˆãƒ«é †" },
];

export interface HistoryEntry {
  timestamp: string;
  title: string;
  content: string;
  label?: string;
}

export interface AppNotification {
  id: string;
  type: "like" | "favorite";
  promptId: string;
  promptTitle: string;
  actorName: string;
  timestamp: string;
  read: boolean;
}

/* â”€â”€â”€ Phase constants (moved from mock-data.ts) â”€â”€â”€ */
export interface PhaseInfo {
  id: Phase;
  label: string;
  icon: string;
  hint: string;
}

export const PHASES: PhaseInfo[] = [
  { id: "All", label: "ã™ã¹ã¦", icon: "ğŸ ", hint: "å…¨ãƒ•ã‚§ãƒ¼ã‚ºã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ" },
  { id: "Planning", label: "ä¼ç”»", icon: "ğŸŒ±", hint: "ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æ•´ç†ã™ã‚‹ã¨ã" },
  { id: "Design", label: "è¨­è¨ˆ", icon: "ğŸ¨", hint: "ç”»é¢ã‚„æ§‹æˆã‚’è€ƒãˆã‚‹ã¨ã" },
  { id: "Implementation", label: "å®Ÿè£…", icon: "ğŸ’»", hint: "ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¨ã" },
  { id: "Debug", label: "ãƒ‡ãƒãƒƒã‚°", icon: "ğŸ›", hint: "ã‚¨ãƒ©ãƒ¼ã‚’ç›´ã™ã¨ã" },
  { id: "Release", label: "ãƒªãƒªãƒ¼ã‚¹", icon: "ğŸš€", hint: "å…¬é–‹ã™ã‚‹ã¨ã" },
  { id: "Other", label: "ãã®ä»–", icon: "ğŸ“¦", hint: "ãã®ä»–ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ" },
];
